var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=exports.createTodo=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _defineProperty2=_interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));var _regenerator=_interopRequireDefault(require("@babel/runtime/regenerator"));var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));var _supertest=_interopRequireDefault(require("supertest"));var _=_interopRequireDefault(require("."));var _Todo=_interopRequireDefault(require("../../models/Todo"));var _jwt=require("./jwt");var createTodo=function(){var _ref=(0,_asyncToGenerator2.default)(_regenerator.default.mark(function _callee(){var times,todos,i,_args=arguments;return _regenerator.default.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:times=_args.length>0&&_args[0]!==undefined?_args[0]:1;todos=[];i=0;case 3:if(!(i<times)){_context.next=12;break;}_context.t0=todos;_context.next=7;return _Todo.default.model.create({title:"title"+i,description:"descript"+i});case 7:_context.t1=_context.sent;_context.t0.push.call(_context.t0,_context.t1);case 9:i=+1;_context.next=3;break;case 12:return _context.abrupt("return",times===1?todos[0]:todos);case 13:case"end":return _context.stop();}}},_callee);}));return function createTodo(){return _ref.apply(this,arguments);};}();exports.createTodo=createTodo;var app=function(){function app(){(0,_classCallCheck2.default)(this,app);}(0,_createClass2.default)(app,null,[{key:"__withAuthorization",value:function __withAuthorization(request){return this.token?request.set('authorization',"Bearer "+this.token):request;}},{key:"get",value:function get(url){var request=this.app.get(url);return app.__withAuthorization(request);}},{key:"post",value:function post(url){var request=this.app.post(url);return app.__withAuthorization(request);}},{key:"put",value:function put(url){var request=this.app.put(url);return app.__withAuthorization(request);}},{key:"delete",value:function _delete(url){var request=this.app.delete(url);return app.__withAuthorization(request);}},{key:"patch",value:function patch(url){var request=this.app.patch(url);return app.__withAuthorization(request);}}]);return app;}();exports.default=app;(0,_defineProperty2.default)(app,"token",(0,_jwt.generateToken)({}));(0,_defineProperty2.default)(app,"app",(0,_supertest.default)(_.default.app));